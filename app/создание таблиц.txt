
CREATE TABLE USERS
(
    ID INTEGER PRIMARY KEY NOT NULL,
    LOGIN VARCHAR(40) UNIQUE NOT NULL,
    PASSWORD VARCHAR(20) NOT NULL,
    EMAIL VARCHAR(30) UNIQUE NOT NULL,
    USER_TYPE VARCHAR(10) NOT NULL,
    FULL_NAME VARCHAR(80) UNIQUE
);

CREATE TABLE MANUFACTURERS
(
    ID INTEGER PRIMARY KEY NOT NULL,
    EMAIL VARCHAR(30) UNIQUE NOT NULL,
    COMPANY_NAME VARCHAR(25) UNIQUE NOT NULL
);

CREATE TABLE FACTORIES
(
    ID INTEGER PRIMARY KEY NOT NULL,
    LOCATION VARCHAR(70) NOT NULL,
    FACTORY_NAME VARCHAR(25) UNIQUE NOT NULL,
    MANUFACTURER_ID INTEGER,
    FOREIGN KEY (MANUFACTURER_ID)  REFERENCES MANUFACTURERS (ID)
);

CREATE TABLE PRODUCT_TYPES
(
    ID INTEGER PRIMARY KEY NOT NULL,
    TYPE_NAME VARCHAR(25) UNIQUE NOT NULL
);

CREATE TABLE PRODUCTS
(
    ID INTEGER PRIMARY KEY NOT NULL,
    NAME VARCHAR(25) UNIQUE NOT NULL,
    FACTORY_ID INTEGER,
    PRODUCT_TYPE_ID INTEGER,
    CALORIE_CONTENT INTEGER,
    EXPIRATION_DATE DATETIME,
    DIMENSION VARCHAR(10),
    WEIGHT INTEGER,
    FOREIGN KEY (FACTORY_ID)  REFERENCES FACTORIES (ID),
    FOREIGN KEY (PRODUCT_TYPE_ID)  REFERENCES PRODUCT_TYPES (ID)
);

CREATE TABLE PRODUCT_UNITS
(
    ID INTEGER PRIMARY KEY NOT NULL,
    PRODUCT_ID INTEGER,
    QUANTITY INTEGER,
    MANUFACTURE_DATE DATETIME,
    RELEVANCE VARCHAR(10),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS (ID)
);

CREATE TABLE INGREDIENTS
(
    ID INTEGER PRIMARY KEY NOT NULL,
    INGREDIENT_NAME VARCHAR(25) UNIQUE NOT NULL,
    DIMENSION VARCHAR(10)
);

CREATE TABLE PRODUCT_INGREDIENT
(
    ID INTEGER PRIMARY KEY NOT NULL,
    PRODUCT_ID INTEGER,
    INGREDIENT_ID INTEGER,
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS (ID),
    FOREIGN KEY (INGREDIENT_ID) REFERENCES INGREDIENTS (ID)
);